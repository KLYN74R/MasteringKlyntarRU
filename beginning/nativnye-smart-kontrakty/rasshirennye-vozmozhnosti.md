---
description: –ï—â—ë –Ω–µ–º–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π –∏–Ω—Ñ—ã –ø—Ä–æ KLYNTAR VM
cover: ../../.gitbook/assets/4439981.jpg
coverY: -260.62833432128036
---

# üí™ –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### <mark style="color:red;">**–ö–∞–∫ KLYNTAR —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —ç–Ω–µ—Ä–≥–∏—é –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤**</mark>

–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–º - –Ω–∞–º –≤–µ–¥—å –Ω–µ –Ω—É–∂–Ω–æ —á—Ç–æ–± –Ω–∞—à –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä —Å–≥–æ—Ä–µ–ª –∏ –Ω–æ–¥–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∞—Å—å. –ù—É–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å —Ç–æ—Ç —Ñ–∞–∫—Ç, —á—Ç–æ –≤–Ω—É—Ç—Ä–∏ –±–∞–π—Ç-–∫–æ–¥–∞ –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è —Å–ø—Ä—è—Ç–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –∏–ª–∏ –µ—â—ë –∫–∞–∫–∏–º-—Ç–æ –æ–±—Ä–∞–∑–æ–º –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –Ω–∞–¥–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∏ —Ç–æ, —Å–∫–æ–ª—å–∫–æ —Ä–µ—Å—É—Ä—Å–æ–≤ –±—É–¥–µ—Ç –ø–æ—Ç—Ä–∞—á–µ–Ω–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ –Ω–æ–¥—ã. –í–µ–¥—å –∑–∞–ø—É—Å–∫ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—É–º–º—É a+b —è–≤–Ω–æ —Ç—Ä–µ–±—É–µ—Ç –º–µ–Ω—å—à–µ, —á–µ–º —Ü–∏–∫–ª —Å 10 000 –∏—Ç–µ—Ä–∞—Ü–∏–π.

–í KLYNTAR VM –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –æ—Ç EWASM –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤. –í–æ—Ç –∏—Ö GitHub

![](<../../.gitbook/assets/image (1).png>)

{% embed url="https://github.com/ewasm" %}

–ù–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π _<mark style="color:red;">**wasm-metering**</mark>_ –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–Ω–∂–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä—å –±–∞–π—Ç-–∫–æ–¥–∞ –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

![](../../.gitbook/assets/image.png)

–ù–∞ –≤—ã—Ö–æ–¥–µ –º—ã –ø–æ–ª—É—á–∏–º  –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—É –±–∞–π—Ç-–∫–æ–¥, –Ω–æ —Ç–µ–ø–µ—Ä—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ –∏ –∏–¥—ë—Ç —Ä–∞—Å—á—ë—Ç –∑–∞—Ç—Ä–∞—á–∏–≤–∞–µ–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤. –î–ª—è —ç—Ç–æ–≥–æ, –≤ README –ø—Ä–æ–µ–∫—Ç–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –ø—Ä–∏–º–µ—Ä:

### <mark style="color:red;">**–†–∞–∑–±–∏—Ä–∞–µ–º—Å—è –¥–µ—Ç–∞–ª—å–Ω–µ–π**</mark>

```javascript
const fs = require('fs')
const metering = require('wasm-metering')

const wasm = fs.readFileSync('fac.wasm')
const meteredWasm = metering.meterWASM(wasm, {
  meterType: 'i32'
})

const limit = 90000000
let gasUsed = 0

const mod = WebAssembly.Module(meteredWasm.module)
const instance = WebAssembly.Instance(mod, {
  'metering': {
    'usegas': (gas) => {
      gasUsed += gas
      if (gasUsed > limit) {
        throw new Error('out of gas!')
      }
    }
  }
})

const result = instance.exports.fac(6)
console.log(`result:${result}, gas used ${gasUsed * 1e-4}`) // result:720, gas used 0.4177
```

–ó–¥–µ—Å—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è gasUsed –∏ –ª–∏–º–∏—Ç –≥–∞–∑–∞. –ö–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ —ç—Ç–∏—Ö —Å—Ç—Ä–æ—á–µ–∫, –º–æ–¥—É–ª—å –±–µ—Ä—ë—Ç –≥–æ–ª—ã–π –±–∞–π—Ç-–∫–æ–¥ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–π –±–∞–π—Ç-–∫–æ–¥ –∫—É–¥–∞ –∏–Ω–∂–µ–∫—Ç–∏—Ç&#x20;



![](<../../.gitbook/assets/image (52).png>)

{% embed url="https://github.com/ewasm/design/blob/master/metering.md" %}

\*—Å—é–¥–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É —Å .wat —Ñ–∞–π–ª–æ–º —Å –∏–Ω–∂–µ–∫—Ç–Ω—É—Ç—ã–º –∏–∑–º–µ—Ä–µ–Ω–∏–µ–º



### <mark style="color:red;">**–°—Å—ã–ª–∫–∏**</mark>

{% embed url="https://ewasm.readthedocs.io/en/mkdocs/" %}
